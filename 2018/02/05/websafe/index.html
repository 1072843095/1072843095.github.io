<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0">






<meta name="description" content="浏览器安全 HTTP首部X-Content-Type-Options   浏览器可以使用各种检测技术判断服务器返回了什么类型的内容。然后，浏览器会执行一些与该内容类型相关的操作。而 nosniff 指令可以禁用浏览器的上述行为，强制浏览器按照Content-type首部来渲染内容。">
<meta property="og:type" content="article">
<meta property="og:title" content="浏览器安全">
<meta property="og:url" content="https://1072843095.github.io/2018/02/05/websafe/index.html">
<meta property="og:site_name" content="还没想好">
<meta property="og:description" content="浏览器安全 HTTP首部X-Content-Type-Options   浏览器可以使用各种检测技术判断服务器返回了什么类型的内容。然后，浏览器会执行一些与该内容类型相关的操作。而 nosniff 指令可以禁用浏览器的上述行为，强制浏览器按照Content-type首部来渲染内容。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-03-27T04:44:39.822Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="浏览器安全">
<meta name="twitter:description" content="浏览器安全 HTTP首部X-Content-Type-Options   浏览器可以使用各种检测技术判断服务器返回了什么类型的内容。然后，浏览器会执行一些与该内容类型相关的操作。而 nosniff 指令可以禁用浏览器的上述行为，强制浏览器按照Content-type首部来渲染内容。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://1072843095.github.io/2018/02/05/websafe/">





  <title> 浏览器安全 | 还没想好 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">还没想好</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">也还没想好</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://1072843095.github.io/2018/02/05/websafe/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chris Han">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/head.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="还没想好">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                浏览器安全
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-05T16:15:51+08:00">
                2018-02-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/" itemprop="url" rel="index">
                    <span itemprop="name">学习笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>浏览器安全</p>
<h3 id="HTTP首部"><a href="#HTTP首部" class="headerlink" title="HTTP首部"></a>HTTP首部</h3><h4 id="X-Content-Type-Options"><a href="#X-Content-Type-Options" class="headerlink" title="X-Content-Type-Options"></a>X-Content-Type-Options</h4><p>   浏览器可以使用各种检测技术判断服务器返回了什么类型的内容。然后，浏览器会执行一些与该内容类型相关的操作。而 nosniff 指令可以禁用浏览器的上述行为，强制浏览器按照Content-type首部来渲染内容。<br><a id="more"></a><br>   举个例子，如果服务器给一个 script 标签返回的响应中带有 nosniff 指令，那么除非响应的MIME类型是 application/javascript （或其他几个字符串），否则浏览器会忽略响应内容。对Wikipedia之类（允许上传）的网站来说，能做到这一点非常重要。<br>假如响应不包含这个指令，而且有人上传了一个特殊的文件，后来该文件又被人下载的话，可能就会造成威胁。此时，浏览器可能就会按照惯例错误地解释文件的MIME类型，例如把JPEG当作脚本来解释。从浏览器安全角度来看，很可能有人会利用这一点控制浏览器。比如，这个人上传一种允许上传的文件（看起来似乎很安全），而浏览器随后却以另一种比较危险和易变的方式去解释它。</p>
<h4 id="Strict-Transport-Security"><a href="#Strict-Transport-Security" class="headerlink" title="Strict-Transport-Security"></a>Strict-Transport-Security</h4><p>这个HTTP首部指示浏览器必须通过有效的HTTPS通道与网站通信。如果是一个不安全的连接，用户不可能接受HTTPS错误并继续浏览网站。相反，浏览器会解释错误，并且不允许用户继续浏览。</p>
<h4 id="X-Frame-Options"><a href="#X-Frame-Options" class="headerlink" title="X-Frame-Options"></a>X-Frame-Options</h4><p>X-Frame-Options HTTP首部用于阻止浏览器中的页面内嵌框架。浏览器在看到这个首部后，应该保证不把接收到的页面显示在一个IFrame中。<br>    制定这个首部的目的是防止发生界面伪装（UI redressing）攻击，其中之一就是点击劫持（clickjacking）。这种攻击是把诱导页面放到一个完全透明的前景框架窗口中，而用户以为自己点<br>击的是下方不透明的（被攻击的）页面，实际上点击的却是透明的前景（诱导）页面。</p>
<h3 id="初始控制"><a href="#初始控制" class="headerlink" title="初始控制"></a>初始控制</h3><h4 id="使用XSS攻击"><a href="#使用XSS攻击" class="headerlink" title="使用XSS攻击"></a>使用XSS攻击</h4><p>反射型XSS和持久型XSS是利用服务器端隐患。DOM XSS和通用XSS是利用客户端缺陷。</p>
<h5 id="反射型XSS"><a href="#反射型XSS" class="headerlink" title="反射型XSS"></a>反射型XSS</h5><p>不可信用户数据被提交到一个web应用，然后该数据立即在响应中被返回，也就是说在页面中反射了不可信内容。由于浏览器看到的是服务器端代码，所以就相信它是安全的，于是就会执行它。<br>例子：当遇到”<a href="http://browservictim.com/userhome.jsp?user=" target="_blank" rel="noopener">http://browservictim.com/userhome.jsp?user=</a> &lt;iframe%20src=<a href="http://browserhacker.com/&gt;" target="_blank" rel="noopener">http://browserhacker.com/&gt;</a>“时，如果直接把user值展示在页面中，就会在页面中插入一个地址为browserhacker.com的框架。iframe换成script可以注入远端脚本。<br>尝试：1.js获取url的查询字符串decodeURIComponent后再innerHTML插入页面，插入script，并没有加载。2.新建一个div(或script)标签，innerHTML设为前面decodeURIComponent后的值，插入成功(script报错)，没有载入。（创建script标签，src引入不考虑）<br>结论：服务器渲染的隐患。纯前端页面不存在这个问题。<br>模糊url的方法：1.缩短url 2.重定向url 3.采用url编码或ASCII编码来编码url 4.添加一些多余的、无关的查询参数，把恶意内容放在中间或后面 5.在url中使用@符号以添加伪域名内容 6.把主机名转换为整数，比如<a href="http://4362362363777" target="_blank" rel="noopener">http://4362362363777</a></p>
<h5 id="存储型XSS"><a href="#存储型XSS" class="headerlink" title="存储型XSS"></a>存储型XSS</h5><p>存储型（或持久型）XSS与反射型XSS类似，区别在于存储型XSS会持久保存于Web应用的数据存储中。随后，只要是在脚本被持久存储后访问被侵入网站的浏览器，都会执行该恶意代码。<br>例子：在上一节中反射型XSS示例的基础上，假设应用也要把用户的显示名称保存起来。假设在应用中的某个地方，有代码会提取最后登录用户的列表。</p>
<h5 id="DOM-XSS"><a href="#DOM-XSS" class="headerlink" title="DOM XSS"></a>DOM XSS</h5><p>使用document.write、document.writeln、eval等造成的</p>
<h5 id="通用型XSS"><a href="#通用型XSS" class="headerlink" title="通用型XSS"></a>通用型XSS</h5><p>通用型XSS是另一种在浏览器中执行恶意JavaScript的方法。利用浏览器本身的缺陷、扩展或插件的缺陷。</p>
<h3 id="攻击Web应用"><a href="#攻击Web应用" class="headerlink" title="攻击Web应用"></a>攻击Web应用</h3><h4 id="CSRF-攻击利用了Web应用对其用户的HTTP请求的信任。"><a href="#CSRF-攻击利用了Web应用对其用户的HTTP请求的信任。" class="headerlink" title="CSRF 攻击利用了Web应用对其用户的HTTP请求的信任。"></a>CSRF 攻击利用了Web应用对其用户的HTTP请求的信任。</h4><p>攻击者可以伪造跨域AJAX请求。浏览器处理该请求后，请求会自动包含用户的cookie，因而就变成了合法认证过的请求了。使用JavaScript动态创建和提交参数相同的HTML表单，也可以<br>伪造同样的请求。这些请求通常会被Web应用信任，是因为用户已经登录过了，而且每次请求都会有相应的cookie随之发送给源。之所以可以利用这种漏洞，是因为HTTP请求可以被模仿，而<br>HTTP协议也未说明如何处理独一无二的请求。<br>防御：如果在浏览器发送给Web应用的请求后面，加上一个伪随机token（防御XSRF的token）作为参数，那么XSRF攻击可能会失败 。</p>
<h5 id="通过XSS绕过防御XSRF的token"><a href="#通过XSS绕过防御XSRF的token" class="headerlink" title="通过XSS绕过防御XSRF的token"></a>通过XSS绕过防御XSRF的token</h5><p>防御XSRF的token的作用是降低跨站点请求伪造攻击成功的可能性，但对XSS无效。如果目<br>标Web应用使用了防御XSRF的token，而你通过勾连控制了目标源，则可以绕过该保护机制。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/01/29/pattern/" rel="next" title="JavaScript设计模式与开发实践笔记">
                <i class="fa fa-chevron-left"></i> JavaScript设计模式与开发实践笔记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/03/19/es61/" rel="prev" title="深入理解ES6（1）">
                深入理解ES6（1） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/uploads/head.jpeg" alt="Chris Han">
          <p class="site-author-name" itemprop="name">Chris Han</p>
           
              <p class="site-description motion-element" itemprop="description">一人一世界</p>
          
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP首部"><span class="nav-number">1.</span> <span class="nav-text">HTTP首部</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#X-Content-Type-Options"><span class="nav-number">1.1.</span> <span class="nav-text">X-Content-Type-Options</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Strict-Transport-Security"><span class="nav-number">1.2.</span> <span class="nav-text">Strict-Transport-Security</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#X-Frame-Options"><span class="nav-number">1.3.</span> <span class="nav-text">X-Frame-Options</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#初始控制"><span class="nav-number">2.</span> <span class="nav-text">初始控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用XSS攻击"><span class="nav-number">2.1.</span> <span class="nav-text">使用XSS攻击</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#反射型XSS"><span class="nav-number">2.1.1.</span> <span class="nav-text">反射型XSS</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#存储型XSS"><span class="nav-number">2.1.2.</span> <span class="nav-text">存储型XSS</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DOM-XSS"><span class="nav-number">2.1.3.</span> <span class="nav-text">DOM XSS</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#通用型XSS"><span class="nav-number">2.1.4.</span> <span class="nav-text">通用型XSS</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#攻击Web应用"><span class="nav-number">3.</span> <span class="nav-text">攻击Web应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#CSRF-攻击利用了Web应用对其用户的HTTP请求的信任。"><span class="nav-number">3.1.</span> <span class="nav-text">CSRF 攻击利用了Web应用对其用户的HTTP请求的信任。</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#通过XSS绕过防御XSRF的token"><span class="nav-number">3.1.1.</span> <span class="nav-text">通过XSS绕过防御XSRF的token</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chris Han</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

<br>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

本站总访问量 <span id="busuanzi_value_site_pv"></span> &nbsp&nbsp&nbsp
您是第<span id="busuanzi_value_site_uv"></span>个来到的小伙伴
        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
